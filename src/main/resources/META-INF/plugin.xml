<consulo-plugin url="https://github.com/consulo/consulo-nginx">

    <id>consulo.nginx</id>
    <name>nginx Support</name>
    <vendor url="https://github.com/ishchenko/idea-nginx">Max Ishchenko</vendor>
    <version>SNAPSHOT</version>
    <description>
        <![CDATA[
        nginx server support for IntelliJ IDEA<br>
        Runs/reloads configuration/stops nginx server from IDEA.<br>
        Configuration file syntax highlighting, auto-completion and inspections.

        By default .nginx files are registered as nginx files. To use other extensions you will need to associate those files with the correct file type.

        If you have the Lua extension installed Lua syntax highlighting will be enabled for *_by_lua_block directives used by the lua-nginx-module.
    ]]>
    </description>

    <tags>
        <tag>web.server</tag>
    </tags>

    <resource-bundle>net.ishchenko.idea.nginx.NginxBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <lang.parserDefinition language="nginx"
                               implementationClass="net.ishchenko.idea.nginx.parser.NginxParserDefinition"/>
        <lang.commenter language="nginx" implementationClass="net.ishchenko.idea.nginx.NginxCommenter"/>
        <lang.braceMatcher language="nginx" implementationClass="net.ishchenko.idea.nginx.NginxBraceMatcher"/>
        <lang.foldingBuilder language="nginx" implementationClass="net.ishchenko.idea.nginx.NginxFoldingBuilder"/>
        <lang.documentationProvider language="nginx"
                                    implementationClass="net.ishchenko.idea.nginx.NginxDocumentationProvider"/>
        <lang.formatter language="nginx"
                        implementationClass="net.ishchenko.idea.nginx.formatter.NginxFormattingModelBuilder"/>
        <lang.elementManipulator forClass="net.ishchenko.idea.nginx.psi.impl.NginxDirectiveValueImpl"
                                 implementationClass="net.ishchenko.idea.nginx.psi.impl.NginxDirectiveValueManipulator"/>
        <annotator language="nginx" implementationClass="net.ishchenko.idea.nginx.annotator.NginxAnnotatingVisitor"/>
        <configurationType implementation="net.ishchenko.idea.nginx.run.NginxConfigurationType"/>
        <completion.contributor language="nginx"
                                implementationClass="net.ishchenko.idea.nginx.NginxCompletionContributor"/>
        <gotoFileContributor implementation="net.ishchenko.idea.nginx.NginxChooseByNameContributor"/>
        <programRunner implementation="net.ishchenko.idea.nginx.run.NginxRunner"/>
        <fileTypeFactory implementation="net.ishchenko.idea.nginx.NginxFileTypeFactory"/>
        <!--    <fileType name="nginx" implementationClass="net.ishchenko.idea.nginx.NginxFileType" language="nginx" extensions="nginx" fieldName="INSTANCE" />-->
        <languageInjector implementation="net.ishchenko.idea.nginx.injection.LuaInjector"/>
        <lang.findUsagesProvider language="nginx"
                                 implementationClass="net.ishchenko.idea.nginx.NginxFindUsagesProvider"/>

        <lang.syntaxHighlighterFactory language="nginx"
                                       implementationClass="consulo.nginx.NginxSyntaxHighlighterFactory"/>
      
        <!--<applicationService serviceInterface="net.ishchenko.idea.nginx.platform.PlatformDependentTools"
                            serviceImplementation="net.ishchenko.idea.nginx.platform.LinuxSpecificTools" os="unix"/> -->
        <applicationService serviceInterface="net.ishchenko.idea.nginx.platform.PlatformDependentTools"
                            serviceImplementation="net.ishchenko.idea.nginx.platform.WindowsSpecificTools"
                            os="windows"/>
    </extensions>

    <application-components>
        <component>
            <implementation-class>net.ishchenko.idea.nginx.NginxKeywordsManager</implementation-class>
        </component>
        <component>
            <implementation-class>net.ishchenko.idea.nginx.configurator.NginxConfigurationManager</implementation-class>
        </component>
        <component>
            <implementation-class>net.ishchenko.idea.nginx.configurator.NginxServersConfiguration</implementation-class>
        </component>
    </application-components>

    <actions>
        <action id="nginx.reload" class="net.ishchenko.idea.nginx.run.NginxReloadAction"
                text="Reload nginx configuration files" description="Reloads nginx configuration files"
                icon="consulo.platform.base.PlatformIconGroup@actions.refresh"/>
    </actions>

</consulo-plugin>
